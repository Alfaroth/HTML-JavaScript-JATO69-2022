<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="css/styleEsempio.css">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <title>Cinema Superstar</title>

</head>

<body>

    <div class="container text-center">

        <h1 class="display-1">Cinema Superstar</h1>


        <a href="" id="wiki">
            <h2 id="titolo" class="display-6"></h2>
        </a>
            
        <div class="row align-items-center">
            <div class="col"><button id="prev" class="btn btn-primary disabled">Indietro</button></div>
            <div class="col"><img id="locandina" class="imgDim" src="" alt=""></div>
            <div class="col"><button id="next" class="btn btn-primary">Avanti</button></div>
        </div>       

        <figure>
            <img id="locandina" class="imgDim" src="" alt="">
        </figure>

        <ul id="attori" class="list-inline"></ul>

        <p id="durata"></p>
        <p id="anno"></p>
        <p id="genere"></p>

    </div>

    <script>

        

        var films = [
            {
                titolo: "Il buono, il brutto, il cattivo",
                durata: 175,
                anno: 1966,
                locandina: "https://movieplayer.net-cdn.it/t/images/2014/06/12/buonobruttocattivo_jpg_400x0_crop_q85.jpg",
                genere: ["western", "drammatico"],
                attori: ["Clint Eastwood", "Lee Van Cleef", "Gian Maria VolontÃ©"]
            },
            {
                titolo: "Tre uomini e una gamba",
                durata: 98,
                anno: 1997,
                locandina: "https://m.media-amazon.com/images/I/71g7bXFYMZL._SL1000_.jpg",
                genere: ["commedia"],
                attori: ["Aldo Baglio", "Giovanni Storti", "Giacomino Poretti"]
            },
            {
                titolo: "Matrix",
                durata: 136,
                anno: 1999,
                locandina: "https://www.warnerbros.it/wp-content/uploads/2015/09/Matrix_Poster.jpg",
                genere: ["sci-fi", "drammatico"],
                attori: ["Keanu Reeves", "Carrie-Anne Moss", "Laurence Fishburne", "Hugo Weaving"]
            },
        ];

        var titolo = document.querySelector("#titolo");
        var locandina = document.querySelector("#locandina");
        var durata = document.querySelector("#durata");
        var attori = document.querySelector("#attori");
        var anno = document.querySelector("#anno");
        var genere = document.querySelector("#genere");

        function mostraFilm(index) {

            titolo.textContent = films[index].titolo;

            wiki.setAttribute("href", "https://it.wikipedia.org/wiki/" + creaWiki(films[index].titolo));

            locandina.setAttribute("src", films[index].locandina);
            locandina.setAttribute("alt", "Locandina film in sala: " + films[index].titolo);

            anno.textContent = "Anno prima uscita: " + films[index].anno;

            /*attori.innerHTML = "";
            films[index].attori.forEach(attore => {
                attori.innerHTML += "<a href=\"https://it.wikipedia.org/wiki/" + creaWiki(attore) + "\"><li>" + attore + "</li></a>";
            });*/
            films[index].attori.forEach(attore => {
                attori.innerHTML += "<a href=''" + creaWiki(attore) + "\"><li class=\"list-inline-item\">" + attore + "</li></a>";
            });

            genere.innerHTML = "";
            films[index].genere.forEach(genereFilm => {
                genere.innerHTML += genereFilm + " ";
            });

        }

        var contatore = 0;

        mostraFilm(contatore);

        var btnPrev = document.querySelector("#prev");
        var btnNext = document.querySelector("#next");
        
        /*
        function prevMovie() {
            next.setAttribute("class", "btn btn-primary")
            if (contatore > 0) {
                if (contatore == 1) {
                    prev.setAttribute("class", "btn btn-primary disabled")
                }
                contatore--;
                mostraFilm(contatore);
            } else {
                contatore == films.length - 1;
                mostraFilm(contatore);
            }
        }
        */

        function prevMovie() {
            next.setAttribute("class", "btn btn-primary")
            if (contatore == 1) {
                prev.setAttribute("class", "btn btn-primary disabled")
            }
            contatore--;
            mostraFilm(contatore);
        }

        /*
        function nextMovie() {
            prev.setAttribute("class", "btn btn-primary")
            if (contatore < (films.length)-1) {
                if (contatore == (films.length)-2) {
                    next.setAttribute("class", "btn btn-primary disabled")
                }
                contatore++;
                mostraFilm(contatore);
            } else {
                contatore = 0;
                mostraFilm(contatore);
            }
        }
        */

        function nextMovie() {
            prev.setAttribute("class", "btn btn-primary")
            if (contatore == (films.length)-2) {
                next.setAttribute("class", "btn btn-primary disabled")
            }
            contatore++;
            mostraFilm(contatore);
        }

        btnPrev.addEventListener("click", prevMovie);
        btnNext.addEventListener("click", nextMovie);

        /**
         * - Creare i link titolo del film alla pagina wikipedia
         * - Creare i link agli attori alle singole pagine di ciscun attore
         * - Gestire la rotazione delle locandine
         * - Non modificare l'array di film
         * - Utilizzare classi bootstrap per migliorarne l'aspetto
         * - Centrare nella pagina tutte le informazioni
         * - I pulsanti avanti e indietro devono essere messi a destra e sinistra della locandina
        **/

        function creaWiki(titolo) {
            var t = titolo.split(' ').join('_');
            return t;
        }

    </script>

</body>

</html>